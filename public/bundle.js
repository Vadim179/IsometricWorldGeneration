(()=>{var e={88:(e,t)=>{function r(e,t,r){return e*(1-r)+r*t}t.a=function(e,t,n){var o,a=(n=n||{}).octaveCount||4,i=n.amplitude||.1,s=n.persistence||.2,c=function(e,t){for(var r=new Array(e*t),n=0;n<r.length;++n)r[n]=Math.random();return r}(e,t),l=new Array(a);for(o=0;o<a;++o)l[o]=g(o);var u=new Array(e*t),f=0;for(o=a-1;o>=0;--o){f+=i*=s;for(var d=0;d<u.length;++d)u[d]=u[d]||0,u[d]+=l[o][d]*i}for(o=0;o<u.length;++o)u[o]/=f;return u;function g(n){for(var o=new Array(e*t),a=Math.pow(2,n),i=1/a,s=0,l=0;l<t;++l)for(var u=Math.floor(l/a)*a,f=(u+a)%t,d=(l-u)*i,g=0;g<e;++g){var h=Math.floor(g/a)*a,m=(h+a)%e,v=(g-h)*i,p=r(c[u*e+h],c[f*e+h],d),w=r(c[u*e+m],c[f*e+m],d);o[s]=r(p,w,v),s+=1}return o}}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}(()=>{"use strict";function e(){return document.getElementById("canvas")}function t(){return e().getContext("2d")}const n=Object.freeze(["./assets/images/GrassTile.svg","./assets/images/WaterTile.svg"]),o=Object.freeze({mapSize:32,tileSize:128}),a=new Map;var i,s=r(88);function c(e=32){const{tileSize:t}=o,r=[],n=e*t/3,a=(0,s.a)(e,e);let i=0;for(let o=0;o<e;o++){r[o]=[];for(let s=0;s<e;s++){const e=a[i],c=Math.ceil(8*e),u=l(c),f=t/2*(s-o)-0,d=(s+o)*(t/3)-n-(c<=2?2.5:c)*(t/3);r[o][s]={image:u,x:f,z:d,y:c},i++}}return r}function l(e){let t;return t=e<=2?"WaterTile.svg":"GrassTile.svg",a.get(t)}(i=n,Promise.all(i.map((function(e){return new Promise(((t,r)=>{const n=e.split("/").pop();if(a.has(n))return t(a.get(n));const o=new Image;o.onload=()=>{a.set(n,o),t(o)},o.onerror=()=>{console.error(`Failed to load asset: ${n}`),r()},o.src=e}))}))).then((()=>a))).then((()=>{const r=e();let n=32,a=.5,i=c(n);function s(){t().clearRect(0,0,innerWidth,innerHeight);const e=t();e.save(),e.translate((innerWidth-o.tileSize*a)/2,innerHeight/2),e.scale(a,a),function(e){const{tileSize:r}=o,n=t(),a=document.createElement("canvas"),i=a.getContext("2d");a.width=r,a.height=r;for(const t of e)for(const e of t){const{image:t,x:o,z:s,y:c}=e;if(i.clearRect(0,0,r,r),c<=2){n.drawImage(t,o,s,r,r);continue}i.drawImage(t,0,0,r,r);const l=c/8,u=100*l,f=150*l,d=100*l;i.fillStyle=`rgba(${u}, ${f}, ${d}, 0.65)`,i.globalCompositeOperation="source-atop",i.fillRect(0,0,r,r),i.globalCompositeOperation="source-over",n.drawImage(a,o,s,r,r)}}(i),e.restore()}document.getElementById("sidebar"),document.querySelector("input#background").addEventListener("input",(e=>{r.style.backgroundColor=e.target.value,s()})),document.querySelector("input#size").addEventListener("input",(e=>{n=e.target.value,i=c(n),s()})),addEventListener("wheel",(e=>{a=Math.min(Math.max(.25,a+-.001*e.deltaY),1.5),s()})),r.width=innerWidth,r.height=innerHeight,s()}))})()})();